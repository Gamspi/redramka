"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[6],{2006:function(n,e,t){t.r(e),t.d(e,{default:function(){return O}});var r=t(885),i=t(2791);var s=t(9295),c=t(184),o=function(n){var e=n.isLoading;return(0,c.jsx)(s.Z,{in:e,classNames:"loading",timeout:1e3,unmountOnExit:!0,mountOnEnter:!0,children:(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)("div",{className:"loading__body",children:(0,c.jsx)("p",{children:"Loading...."})})})})},a=t(3366),u=t(7462);var d=t(1721),l=t(5545);function f(n,e){var t=Object.create(null);return n&&i.Children.map(n,(function(n){return n})).forEach((function(n){t[n.key]=function(n){return e&&(0,i.isValidElement)(n)?e(n):n}(n)})),t}function h(n,e,t){return null!=t[e]?t[e]:n.props[e]}function m(n,e,t){var r=f(n.children),s=function(n,e){function t(t){return t in e?e[t]:n[t]}n=n||{},e=e||{};var r,i=Object.create(null),s=[];for(var c in n)c in e?s.length&&(i[c]=s,s=[]):s.push(c);var o={};for(var a in e){if(i[a])for(r=0;r<i[a].length;r++){var u=i[a][r];o[i[a][r]]=t(u)}o[a]=t(a)}for(r=0;r<s.length;r++)o[s[r]]=t(s[r]);return o}(e,r);return Object.keys(s).forEach((function(c){var o=s[c];if((0,i.isValidElement)(o)){var a=c in e,u=c in r,d=e[c],l=(0,i.isValidElement)(d)&&!d.props.in;!u||a&&!l?u||!a||l?u&&a&&(0,i.isValidElement)(d)&&(s[c]=(0,i.cloneElement)(o,{onExited:t.bind(null,o),in:d.props.in,exit:h(o,"exit",n),enter:h(o,"enter",n)})):s[c]=(0,i.cloneElement)(o,{in:!1}):s[c]=(0,i.cloneElement)(o,{onExited:t.bind(null,o),in:!0,exit:h(o,"exit",n),enter:h(o,"enter",n)})}})),s}var p=Object.values||function(n){return Object.keys(n).map((function(e){return n[e]}))},v=function(n){function e(e,t){var r,i=(r=n.call(this,e,t)||this).handleExited.bind(function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,d.Z)(e,n);var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(n,e){var t,r,s=e.children,c=e.handleExited;return{children:e.firstRender?(t=n,r=c,f(t.children,(function(n){return(0,i.cloneElement)(n,{onExited:r.bind(null,n),in:!0,appear:h(n,"appear",t),enter:h(n,"enter",t),exit:h(n,"exit",t)})}))):m(n,s,c),firstRender:!1}},t.handleExited=function(n,e){var t=f(this.props.children);n.key in t||(n.props.onExited&&n.props.onExited(e),this.mounted&&this.setState((function(e){var t=(0,u.Z)({},e.children);return delete t[n.key],{children:t}})))},t.render=function(){var n=this.props,e=n.component,t=n.childFactory,r=(0,a.Z)(n,["component","childFactory"]),s=this.state.contextValue,c=p(this.state.children).map(t);return delete r.appear,delete r.enter,delete r.exit,null===e?i.createElement(l.Z.Provider,{value:s},c):i.createElement(l.Z.Provider,{value:s},i.createElement(e,r,c))},e}(i.Component);v.propTypes={},v.defaultProps={component:"div",childFactory:function(n){return n}};var x=v,E=t(2380),j=t(4222),y=function(){var n=(0,E.X)((function(n){return n.cards})).isSuccess,e=(0,j.B)().setIsSuccess;return(0,c.jsx)(s.Z,{in:n,timeout:500,classNames:"success",unmountOnExit:!0,mountOnEnter:!0,children:(0,c.jsxs)("div",{className:"success",onClick:function(){e(!1)},children:[(0,c.jsx)("h1",{children:"Success"}),(0,c.jsx)("p",{children:"You have successfully deleted the card"})]})})},_=(0,i.memo)(y),N=t(93),b=t(3504),C=function(n){var e=n.name,t=n.trips,r=n.id,i=(0,j.B)().setIsConfirm;return(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)(b.rU,{style:{textDecoration:"none"},to:"card/".concat(r),children:(0,c.jsx)("div",{className:"card__body",children:(0,c.jsxs)("div",{className:"card__info",children:[(0,c.jsxs)("h2",{children:["Name: ",e]}),(0,c.jsxs)("p",{children:["Trips: ",t]})]})})}),(0,c.jsx)("button",{className:"card__button",onClick:function(){return i(!0)},children:"\u2718"})]})},g=function(){var n=(0,E.X)((function(n){return n.cards})).isError,e=(0,j.B)().setIsError;return(0,c.jsx)(s.Z,{in:n,timeout:500,classNames:"error-card",unmountOnExit:!0,mountOnEnter:!0,children:(0,c.jsx)("div",{className:"error-card",children:(0,c.jsxs)("div",{className:"error-card__body",children:[(0,c.jsx)("h2",{className:"error-card__title",children:"Error"}),(0,c.jsx)("div",{className:"error-card__title",children:"Some error has occurred"}),(0,c.jsx)("button",{className:"error-card__button",onClick:function(){return e(!1)},children:"\u2718"})]})})})},S=i.memo(g),I=t(6871),Z=function(){var n=function(n){var e=(0,i.useRef)(null),t=(0,i.useState)(!1),s=(0,r.Z)(t,2),c=s[0],o=s[1];return(0,i.useEffect)((function(){var t=new IntersectionObserver((function(n){var e=(0,r.Z)(n,1)[0];o(e.isIntersecting)}),n);return e.current&&t.observe(e.current),function(){e.current&&t.unobserve(e.current)}}),[e,n]),[e,c]}(),e=(0,r.Z)(n,2),t=e[0],a=e[1],u=function(n){var e=(0,i.useState)(""),t=(0,r.Z)(e,2),s=t[0],c=t[1];return(0,i.useEffect)((function(){document.body.setAttribute("data-".concat(n),s)}),[s]),[c]}("fixed"),d=(0,r.Z)(u,1)[0],l=(0,I.UO)().id,f=(0,E.X)((function(n){return n.cards})),h=f.totalPassengers,m=f.isLoading,p=f.cards,v=f.page,y=f.activeCardId,b=f.isConfirm;console.log(b);var g=(0,j.B)(),Z=g.downloadCards,O=g.setId,k=g.setIsConfirm;return(0,i.useEffect)((function(){d(b?"true":"")}),[b]),(0,i.useEffect)((function(){a&&h>p.length&&Z(v)}),[a]),(0,i.useEffect)((function(){}),[y]),(0,c.jsxs)("div",{className:"cards-list",children:[(0,c.jsx)(S,{}),(0,c.jsx)(o,{isLoading:m}),(0,c.jsx)(_,{}),(0,c.jsx)(N.Z,{}),(0,c.jsx)("div",{className:"cards-list__body",children:(0,c.jsx)(x,{component:"ul",children:p.map((function(n){var e=n._id,t=n.trips,r=n.name;return(0,c.jsx)(s.Z,{timeout:500,classNames:"item",children:(0,c.jsx)("li",{className:"item",onClick:function(n){O(e),n.target.classList.contains("card__button")&&k(!0)},children:(0,c.jsx)(C,{id:e,trips:t,name:r})})},e)}))})}),(0,c.jsx)(s.Z,{timeout:1e3,classNames:"info",in:!!l,children:(0,c.jsx)(I.j3,{})}),"))",(0,c.jsx)("div",{ref:t})]})},O=i.memo(Z)},93:function(n,e,t){t.d(e,{Z:function(){return d}});var r=t(2791),i=t(9295),s=t(2380),c=t(4222),o=t(6871),a=t(184),u=function(){var n=(0,s.X)((function(n){return n.cards})),e=n.isConfirm,t=n.activeCardId,r=(0,c.B)(),u=r.setIsConfirm,d=r.deleteCardFunction,l=(0,o.UO)().id,f=(0,o.s0)();return(0,a.jsx)(i.Z,{in:e,timeout:500,classNames:"confirm",unmountOnExit:!0,mountOnEnter:!0,children:(0,a.jsx)("div",{className:"confirm",children:(0,a.jsxs)("div",{className:"confirm__body",children:[(0,a.jsx)("p",{children:"Are you sure you want to delete the card?"}),(0,a.jsxs)("div",{className:"confirm__buttons",children:[(0,a.jsx)("button",{onClick:function(){d(t),u(!1),l&&f(-1)},disabled:!e,children:"Yes"}),(0,a.jsx)("button",{onClick:function(){u(!1)},disabled:!e,children:"No"})]})]})})})},d=r.memo(u)},4222:function(n,e,t){t.d(e,{B:function(){return m}});var r=t(6030),i=t(7781),s=t(8683),c=t(5861),o=t(7757),a=t.n(o),u=t(2678),d=t(4569),l=t.n(d),f={setCards:function(n){return{type:u.N.SET_CARDS,payload:n}},setTotalPassengers:function(n){return{type:u.N.SET_TOTAL_PASSENGERS,payload:n}},setPage:function(){return{type:u.N.SET_PAGE}},setIsError:function(n){return{type:u.N.SET_IS_ERROR,payload:n}},setIsSuccess:function(n){return{type:u.N.SET_SUCCESS,payload:n}},setIsConfirm:function(n){return{type:u.N.SET_IS_CONFIRM,payload:n}},setId:function(n){return{type:u.N.SET_ACTIVE_CARD_ID,payload:n}},setIsLoading:function(n){return{type:u.N.SET_IS_LOADING,payload:n}},deleteCard:function(n){return{type:u.N.DELETE_CARD,payload:n}},downloadCards:function(n){return function(){var e=(0,c.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(f.setIsLoading(!0)),e.next=3,l().get("https://api.instantwebtools.net/v1/passenger?page=".concat(n,"&size=").concat(20)).then((function(n){var e=n.data;t(f.setIsError(!1)),t(f.setTotalPassengers(e.totalPassengers)),t(f.setCards(e.data)),t(f.setPage())})).catch((function(n){console.error(n)})).finally((function(){t(f.setIsLoading(!1))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},deleteCardFunction:function(n){return function(){var e=(0,c.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(f.setIsSuccess(!1)),e.next=3,l().delete("https://api.instantwebtools.net/v1/passenger/".concat(n)).then((function(){t(f.deleteCard(n))})).then((function(){t(f.setIsSuccess(!0))})).catch((function(n){console.log(n),t(f.setIsError(!0))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}},h=(0,s.Z)({},f),m=function(){var n=(0,r.I0)();return(0,i.DE)(h,n)}},2380:function(n,e,t){t.d(e,{X:function(){return r}});var r=t(6030).v9}}]);
//# sourceMappingURL=6.a1d66402.chunk.js.map